<!--operator.html-->

<!--Embed the header.html template at this location-->
{{ template "header.html" .}}

<div class="container-fluid">
    <p></p>
    <div class="card">
        <h3 class="card-header">Регистрация услуги</h3>
        <div class="col-sm-12">
            <p></p>
            <div class="form-row">
                <div class="col">
                    <h6>Найти услугу</h6>
                    <label class="sr-only" for="inlineFormInput">Название услуги</label>
                    <input class="search-input form-control mr-sm-2 mb-2 mb-sm-0" id="serviceid"></input>
                </div>
                <div class="col">
                    <h6>Выбор окна</h6>
                    <label class="sr-only" for="inlineFormInput">Окна</label>
                    <select class="custom-select">
                    <!-- <select class="custom-select" multiple> -->
                                    <!-- <option selected>Open this select menu</option> -->
                                    <option value="1">OKNO 1</option>
                                    <option value="2">OKNO 2</option>
                                    <option value="3">OKNO 3</option>
                                    <option value="4">OKNO 4</option>
                                    <option value="5">OKNO 5</option>
                                    <option value="6">OKNO 6</option>
                                    <option value="7">OKNO 7</option>
                    </select>
                </div>
            </div>

            <p></p>
            <div id="jstree">
                <script>
                    // $(function() {
                    //     $.ajax({
                    //         async: true,
                    //         type: "GET",
                    //         url: "/json/datatree.json",
                    //         dataType: "json",
                    //         success: function(json) {
                    //             createJSTree(json);
                    //         },

                    //         error: function(xhr, ajaxOptions, thrownError) {
                    //             alert(xhr.status);
                    //             alert(thrownError);
                    //         }
                    //     });
                    // });

                    $(function() {

                        $(".search-input").keyup(function() {
                            var searchString = $(this).val();
                            console.log(searchString);
                            $('#jstree').jstree('search', searchString);
                        });


                        $('#jstree').jstree({
                            'core': {

                                'data': [{
                                    "id": "1.0",
                                    "text": "Fresh Products",
                                    "icon": "",
                                    "state": {
                                        "opened": false,
                                        "disabled": false,
                                        "selected": false
                                    },
                                    "children": [{
                                        "id": "2.06.0",
                                        "text": "Ethnic & Specialty",
                                        "icon": "",
                                        "state": {
                                            "opened": false,
                                            "disabled": false,
                                            "selected": false
                                        },
                                        "children": false,
                                        "liAttributes": null,
                                        "aAttributes": null
                                    }, {
                                        "id": "2.07.0",
                                        "text": "Natural & Organic",
                                        "icon": "",
                                        "state": {
                                            "opened": false,
                                            "disabled": false,
                                            "selected": false
                                        },
                                        "children": false,
                                        "liAttributes": null,
                                        "aAttributes": null
                                    }, {
                                        "id": "2.08.0",
                                        "text": "Prepared Foods",
                                        "icon": "",
                                        "state": {
                                            "opened": false,
                                            "disabled": false,
                                            "selected": false
                                        },
                                        "children": false,
                                        "liAttributes": null,
                                        "aAttributes": null
                                    }, {
                                        "id": "2.09.0",
                                        "text": "Seafood",
                                        "icon": "",
                                        "state": {
                                            "opened": false,
                                            "disabled": false,
                                            "selected": false
                                        },
                                        "children": false,
                                        "liAttributes": null,
                                        "aAttributes": null
                                    }, {
                                        "id": "2.010.0",
                                        "text": "Seafood",
                                        "icon": "",
                                        "state": {
                                            "opened": false,
                                            "disabled": false,
                                            "selected": false
                                        },
                                        "children": false,
                                        "liAttributes": null,
                                        "aAttributes": null
                                    }],
                                    "liAttributes": null,
                                    "aAttributes": null
                                }, {
                                    "id": "2.0",
                                    "text": "Frozen Products",
                                    "icon": "",
                                    "state": {
                                        "opened": false,
                                        "disabled": false,
                                        "selected": false
                                    },
                                    "children": [],
                                    "liAttributes": null,
                                    "aAttributes": null
                                }, {
                                    "id": "3.0",
                                    "text": "Store Equipment ",
                                    "icon": "",
                                    "state": {
                                        "opened": false,
                                        "disabled": false,
                                        "selected": false
                                    },
                                    "children": [],
                                    "liAttributes": null,
                                    "aAttributes": null
                                }, {
                                    "id": "4.0",
                                    "text": "Packaged Grocery",
                                    "icon": "",
                                    "state": {
                                        "opened": false,
                                        "disabled": false,
                                        "selected": false
                                    },
                                    "children": [],
                                    "liAttributes": null,
                                    "aAttributes": null
                                }, {
                                    "id": "5.0",
                                    "text": "Retail Technology",
                                    "icon": "",
                                    "state": {
                                        "opened": false,
                                        "disabled": false,
                                        "selected": false
                                    },
                                    "children": [],
                                    "liAttributes": null,
                                    "aAttributes": null
                                }, {
                                    "id": "6.0",
                                    "text": "HBC/Non-Foods",
                                    "icon": "",
                                    "state": {
                                        "opened": false,
                                        "disabled": false,
                                        "selected": false
                                    },
                                    "children": [],
                                    "liAttributes": null,
                                    "aAttributes": null
                                }]

                            },
                            "search": {

                                "case_insensitive": true,
                                "show_only_matches": true
                            },
                            "plugins": ["search"]
                        });
                    });
                </script>

            </div>
            <p></p>
            <div class="form-row">
                <div class="col">
                    <h6>ФИО посетителя</h6>
                    <label class="sr-only" for="inlineFormInput">ФИО посетителя</label>
                    <input class="search-input form-control mr-sm-2 mb-2 mb-sm-0" id="fio"></input>
                </div>
            </div>
            <div class="form-row">
                <div class="col">
                    <h6>Коментарий</h6>
                    <label class="sr-only" for="inlineFormInput">Коментарий</label>
                    <input class="search-input form-control mr-sm-2 mb-2 mb-sm-0" id="comment"></input>
                </div>
            </div>
        </div>
        <p></p>
        <div class="form-row text-right">
            <div class="col-12">
                <div class="modal-footer ">
                    <button type="submit" class="btn btn-warning" style="width: 100%;">
                        Создать
                        <i class="fa fa-plus"></i>
                    </button>
                    <button type="submit" class="btn btn-warning" style="width: 100%;">
                        Записать на время
                        <i class="fa fa-clock"></i>
                    </button>
                </div>
                <!-- <form action="/removeval/Person/" method="GET">
                        <button class="btn btn-danger btn-rounded btn-sm my-0" type="submit"><i class="fas fa-sign-in-alt"></i></button>
                    </form> -->
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <p></p>
    <div class="card">
        <h3 class="card-header panel-success white-text">Список заявлений</h3>
        <div class="card-body">
            <table id="table" class="table table-striped table-bordered" style="width:100%">
                <thead>
                    <tr>
                        <th></th>
                        <th>№</th>
                        <!-- <th data-sortable="true" data-field="User">Оператор</th> -->
                        <th>Имя заявитель</th>
                        <th>Название услуги</th>
                        <th>Дата регистрации</th>
                        <th>Место оператора</th>
                        <th>Номер</th>
                        <th>Телефон</th>
                        <th>Нотация</th>
                        <th>Выдать</th>
                        <th>Редакт..</th>
                        <th>Удаление</th>
                    </tr>
                    <script>
                        function Formatter(value) {
                            return value.substring(0, 20) + "...";
                        }
                    </script>
                </thead>
                <tbody>

                    {{range $i, $e := .person}}
                    <!-- hide modal window -->
                    <div class="modal fade" id="edit{{$e.ID}}" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered modal-lg">

                            <div class="modal-content">
                                <form enctype="multipart/form-data" class="form" action="/edit/{{$e.ID}}" method="POST">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                                        <h4 class="modal-title custom_align" id="Heading">Редактировать данные</h4>
                                    </div>
                                    <div class="modal-body">
                                        <p></p>
                                        <div class="form-row">
                                            <div class="col">
                                                <h6>Имя заявитель</h6>
                                                <input type="text" name="name" class="form-control mr-sm-2 mb-2 mb-sm-0" id="name" value={{$e.Name}}>
                                            </div>
                                        </div>
                                        <p></p>
                                        <div class="form-row">
                                            <div class="col">
                                                <h6>Название услуги</h6>
                                                <input type="text" name="nameservice" class="form-control mr-sm-2 mb-2 mb-sm-0" id="nameservice" value={{$e.NameService}}>
                                            </div>
                                        </div>
                                        <p></p>
                                        <div class="form-row">
                                            <div class="col">
                                                <h6>Дата регистрации</h6>
                                                <input type="datetime-local" name="datein" class="form-control" id="datein" value={{$e.DateIn}}>
                                            </div>
                                        </div>
                                        <p></p>
                                        <div class="form-row">
                                            <div class="col">
                                                <h6>Место оператора</h6>
                                                <select name="loc" class="form-control" id="loc" placeholder={{$e.Location}}> 
                                                        <option value="value1">{{$e.Location}}</option>
                                                    </select>
                                            </div>
                                            <div class="col">
                                                <h6>Номер</h6>
                                                <input type="text" name="number" class="form-control" id="number" value={{$e.Number}}>
                                            </div>
                                            <div class="col">
                                                <h6>Телефон</h6>
                                                <input type="text" name="phone" class="form-control" id="phone" value={{$e.Phone}}>
                                                <script>
                                                    $(function() {
                                                        //Использование параметра completed     .min.js
                                                        $("#phone").mask("8(999) 999-9999");
                                                    });
                                                </script>
                                            </div>
                                        </div>
                                        <p></p>
                                        <div class="form-row">
                                            <div class="col">
                                                <h6>Нотация</h6>
                                                <input type="text" name="note" class="form-control" id="note" value={{$e.Note}}>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="modal-footer ">
                                        <button type="submit" class="btn btn-warning btn-lg" style="width: 100%;">Обнавить</button><i class="fa fa-pencil fa-fw"></i>
                                    </div>
                                </form>
                            </div>
                            <!-- /.modal-content -->
                        </div>
                        <!-- /.modal-dialog -->
                    </div>
                    <!-- emd hide modal window -->

                    <tr>
                        <td class="bs-checkbox"><input data-index="{{$i}}" value="{{$e.ID}}" name="id" id="{{$e.ID}}" type="checkbox"></td>
                        <td>{{$i}}</td>
                        <!-- <td>{{$e.User}}</td> -->
                        <td>{{$e.Name}}</td>
                        <td>{{$e.NameService}}</td>
                        <td>{{$e.DateIn}}</td>
                        <td>{{$e.Address}}</td>
                        <td>{{$e.Location}}</td>
                        <td>{{$e.Number}}</td>
                        <td>{{$e.Phone}}</td>
                        <td>{{$e.Note}}</td>
                        <td>
                            <form action="/removeval/Person/{{$e.ID}}" method="GET">
                                <button class="btn btn-danger btn-rounded btn-sm my-0" type="submit"><i class="fas fa-paper-plane"></i></button>
                            </form>
                        </td>
                        <td>
                            <button class="btn btn-primary btn-rounded btn-sm my-0" data-title="Edit" data-toggle="modal" data-target="#edit{{$e.ID}}">
                                    <i class="fas fa-edit"></i>
                                </button>
                        </td>
                        <td>
                            <form action="/removeval/Person/{{$e.ID}}" method="GET">
                                <button class="btn btn-danger btn-rounded btn-sm my-0" type="submit"><i class="fas fa-trash-alt"></i></button>
                            </form>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
    </div>
</div>

<form enctype="multipart/form-data" class="form1" action="/" method="POST">
    <div class="modal-footer ">
        <button type="submit" class="btn btn-warning btn-lg" style="width: 100%;">Обнавить</button><i class="fa fa-pencil fa-fw"></i>
    </div>
</form>

<script>
    $('#table').tableExport({
        type: 'excel'
    });
</script>

<!--Embed the footer.html template at this location-->
{{ template "footer.html" .}}